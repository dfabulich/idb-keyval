var idbKeyval=function(t){"use strict";var e,n=function(){function t(t,e){void 0===t&&(t="keyval-store"),void 0===e&&(e="keyval"),this.storeName=e,this._dbp=new Promise(function(n,r){var o=indexedDB.open(t,1);o.onerror=function(){return r(o.error)},o.onsuccess=function(){return n(o.result)},o.onupgradeneeded=function(){o.result.createObjectStore(e)}})}return t.prototype._withIDBStore=function(t,e){var n=this;return this._dbp.then(function(r){return new Promise(function(o,u){var i=r.transaction(n.storeName,t);i.oncomplete=function(){return o()},i.onabort=i.onerror=function(){return u(i.error)},e(i.objectStore(n.storeName))})})},t}();function r(){return e||(e=new n),e}return t.Store=n,t.get=function(t,e){var n;return void 0===e&&(e=r()),e._withIDBStore("readonly",function(e){n=e.get(t)}).then(function(){return n.result})},t.set=function(t,e,n){return void 0===n&&(n=r()),n._withIDBStore("readwrite",function(n){n.put(e,t)})},t.del=function(t,e){return void 0===e&&(e=r()),e._withIDBStore("readwrite",function(e){e.delete(t)})},t.clear=function(t){return void 0===t&&(t=r()),t._withIDBStore("readwrite",function(t){t.clear()})},t.keys=function(t){void 0===t&&(t=r());var e=[];return t._withIDBStore("readonly",function(t){(t.openKeyCursor||t.openCursor).call(t).onsuccess=function(){this.result&&(e.push(this.result.key),this.result.continue())}}).then(function(){return e})},t}({});